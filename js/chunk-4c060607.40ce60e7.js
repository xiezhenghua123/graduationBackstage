(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4c060607"],{"0bb4":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("365c"),i=function(t){return Object(n.a)().post("notice/add",t)}},"180b":function(t,e,a){"use strict";a("39db")},"39db":function(t,e,a){},c24f:function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return o}));var n=a("365c"),i=function(t,e){return Object(n.a)().get("user/list/".concat(e),{params:{type:t}})},r=function(t,e){return Object(n.a)().put("".concat(t,"/update"),e)},l=function(t){return Object(n.a)().get("worker/".concat(t))},o=function(t){return Object(n.a)().get("company/".concat(t))},s=function(t,e){return Object(n.a)().put("".concat(t,"/updateScore"),e)}},fff6:function(t,e,a){"use strict";a.r(e);var n=a("5530"),i=(a("e9c4"),a("c24f")),r=a("0bb4"),l=["农、林、牧、渔业","采矿业","制造业","电力、热力、燃气及水生产和供应业","建筑业","批发和零售业","交通运输、仓储和邮政业","住宿和餐饮业","信息传输、软件和信息技术服务业","金融业","房地产业","租赁和商务服务业","科学研究和技术服务业","水利、环境和公共设施管理业","居民服务、修理和其他服务业","教育","卫生和社会工作","文化、体育和娱乐业","公共管理、社会保障和社会组织","国际组织"],o={data:function(){return{headerStyle:{"background-color":"rgba(0,0,0,0.05)"},industry:l,data:[],editData:{},dialogTableVisible:!1,page:1,total:0,limit:10,rules:{phone:[{required:!0,message:"请输入联系方式",trigger:["blur","change"]},{pattern:/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,message:"手机号码格式错误",trigger:["blur","change"]}],legal_person:[{required:!0,message:"请输入法定代表人",trigger:["blur","change"]},{min:2,message:"名字太短",trigger:["blur","change"]},{max:8,message:"名字太长",trigger:["blur","change"]}],code:[{required:!0,message:"请输入统一社会信用代码",trigger:["blur","change"]},{pattern:/[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}$/,transform:function(t){return String(t)},message:"统一社会信用代码格式错误",trigger:["blur","change"]}],industry:{type:"string",required:!0,message:"请正确填写行业",trigger:"blur"},name:{type:"string",required:!0,message:"请正确填写企业名称",trigger:"blur"}}}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Object(i.e)(2,this.page).then((function(e){t.data=e.gameList,t.total=e.total,t.limit=e.limit}))},onSubmit:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.dialogTableVisible=!1,Object(i.a)(t.editData.openid,Object(n.a)(Object(n.a)({},t.editData),{},{type:2})).then((function(){t.$message({message:"修改成功",type:"success"})})))}))},editConfirm:function(t){this.dialogTableVisible=!0,this.editData=Object(n.a)({},t)},cancelConfirm:function(t){var e=this;Object(i.a)(t.openid,Object(n.a)(Object(n.a)({},t),{},{status:3,type:2})).then((function(){t.status=3,e.$message({message:"修改成功",type:"success"})}))},companyConfirm:function(t,e){var a=this;"failed"===e?this.$prompt("请输入认证失败理由","提示",{inputValidator:function(t){if(!t)return"请输入理由"}}).then((function(e){var n=e.value;Object(r.a)({content:JSON.stringify({content:n,type:"confirm"}),openid:t.openid}).then((function(){a.$message({message:"提交成功",type:"success"})}))})):Object(i.a)(t.openid,Object(n.a)(Object(n.a)({},t),{},{status:1,type:2})).then((function(){t.status=1,a.$message({message:"提交成功",type:"success"})}))}}},s=(a("180b"),a("2877")),c=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-fff height-100"},[a("div",{staticClass:"pl-10 pr-10"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,"highlight-current-row":"","header-cell-style":t.headerStyle,border:""}},[a("el-table-column",{attrs:{prop:"openid",label:"用户ID",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"企业名称",width:"180"}}),a("el-table-column",{attrs:{prop:"code",label:"统一社会信用代码",width:"180"}}),a("el-table-column",{attrs:{prop:"legal_person",label:"法定代表人"}}),a("el-table-column",{attrs:{prop:"industry",label:"行业"}}),a("el-table-column",{attrs:{prop:"phone",label:"联系电话",width:"120"}}),a("el-table-column",{attrs:{label:"认证状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(" "+t._s(1==e.row.status?"已认证":"未认证")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.status||3==e.row.status?a("div",{staticClass:"flex"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return t.companyConfirm(e.row,"success")}}},[t._v(" 通过认证 ")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.companyConfirm(e.row,"failed")}}},[t._v(" 认证失败 ")])],1):a("div",[a("el-popconfirm",{attrs:{title:"确认取消该用户的企业身份?","confirm-button-text":"确认","cancel-button-text":"取消"},on:{confirm:function(a){return t.cancelConfirm(e.row)}},scopedSlots:t._u([{key:"reference",fn:function(){return[a("el-button",{staticClass:"mr-10",attrs:{type:"danger",size:"small"}},[t._v(" 取消认证 ")])]},proxy:!0}],null,!0)}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.editConfirm(e.row)}}},[t._v(" 修改信息 ")])],1)]}}])})],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":"",title:"编辑认证信息",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.editData,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"企业名称:",required:"",prop:"name"}},[a("el-input",{model:{value:t.editData.name,callback:function(e){t.$set(t.editData,"name",e)},expression:"editData.name"}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码:",required:"",prop:"code"}},[a("el-input",{model:{value:t.editData.code,callback:function(e){t.$set(t.editData,"code",e)},expression:"editData.code"}})],1),a("el-form-item",{attrs:{label:"法定代表人:",required:"",prop:"legal_person"}},[a("el-input",{model:{value:t.editData.legal_person,callback:function(e){t.$set(t.editData,"legal_person",e)},expression:"editData.legal_person"}})],1),a("el-form-item",{attrs:{label:"行业:",required:"",prop:"industry"}},[a("el-select",{model:{value:t.editData.industry,callback:function(e){t.$set(t.editData,"industry",e)},expression:"editData.industry"}},t._l(t.industry,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"联系电话:",required:"",prop:"phone"}},[a("el-input",{model:{value:t.editData.phone,callback:function(e){t.$set(t.editData,"phone",e)},expression:"editData.phone"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]),a("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取消")])],1)],1)],1),a("div",{staticClass:"mt-10 mb-10 flex",staticStyle:{"justify-content":"right"}},[a("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next","page-size":t.limit,"current-page":t.page,total:t.total},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.getData,"prev-click":t.getData,"next-click":t.getData}})],1)],1)])}),[],!1,null,"80bc382c",null);e.default=c.exports}}]);