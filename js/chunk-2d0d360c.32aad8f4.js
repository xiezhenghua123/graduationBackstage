(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0d360c"],{"5d07":function(e,t,a){"use strict";a.r(t);var r=a("5530"),l=a("365c"),n={data:function(){return{headerStyle:{"background-color":"rgba(0,0,0,0.05)"},data:[],options:[{label:"超级管理员",value:0},{label:"普通管理员",value:2}],dialogVisible:!1,addPerson:{name:"",department:"",level:"",phone:"",password:""},rules:{name:{required:!0,message:"请填写姓名",trigger:"change"},phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{min:11,max:11,message:"请输入11位手机号码",trigger:"blur"},{pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,message:"请输入正确的手机号码"}],level:{required:!0,message:"请选择管理员权限",trigger:"change"},password:{required:!0,message:"请填写密码",trigger:"change"},department:{required:!0,message:"请填写备注",trigger:"change"}}}},mounted:function(){this.getData()},methods:{addManager:function(){var e=this;this.$refs.ref.validate().then((function(t){t&&function(e){return Object(l.a)().post("manager/add",e)}(Object(r.a)(Object(r.a)({},e.addPerson),{},{level:e.addPerson.level[0]})).then((function(){e.$message.success("添加成功！"),e.getData(),e.dialogVisible=!1}))}))},getData:function(){var e=this;Object(l.a)().get("manager/list").then((function(t){e.data=t.list}))},removeManager:function(e){var t,a=this;e.id!=sessionStorage.getItem("id")?(t=e.id,Object(l.a)().delete("manager/".concat(t))).then((function(){a.$message.success("删除成功！"),a.getData()})):this.$message.error("不能删除本人")}}},s=a("2877"),o=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"height-100 bg-fff p-10"},[a("el-button",{staticClass:"mb-10",attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 添加管理员 ")]),a("div",[a("el-table",{attrs:{data:e.data,"header-cell-style":e.headerStyle,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"编号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话号码","min-width":"120"}}),a("el-table-column",{attrs:{prop:"level",label:"权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(" "+e._s(0==t.row.level?"超级管理员":"普通管理员")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"department",label:"备注"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"flex"},[a("el-popconfirm",{attrs:{title:"确认删除该管理员?","confirm-button-text":"确认","cancel-button-text":"取消"},on:{confirm:function(a){return e.removeManager(t.row)}},scopedSlots:e._u([{key:"reference",fn:function(){return[a("el-button",{attrs:{type:"danger",size:"small"}},[e._v(" 删除 ")])]},proxy:!0}],null,!0)})],1)]}}])})],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"添加管理员","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.dialogVisible=!1}}},[a("div",[a("el-form",{ref:"ref",attrs:{model:e.addPerson,"label-width":"auto",rules:e.rules}},[a("el-form-item",{attrs:{prop:"name",label:"姓名",required:""}},[a("el-input",{model:{value:e.addPerson.name,callback:function(t){e.$set(e.addPerson,"name",t)},expression:"addPerson.name"}})],1),a("el-form-item",{attrs:{prop:"phone",label:"电话",required:""}},[a("el-input",{model:{value:e.addPerson.phone,callback:function(t){e.$set(e.addPerson,"phone",t)},expression:"addPerson.phone"}})],1),a("el-form-item",{attrs:{prop:"level",label:"权限",required:""}},[a("el-cascader",{attrs:{options:e.options,placeholder:"请选择管理员权限"},model:{value:e.addPerson.level,callback:function(t){e.$set(e.addPerson,"level",t)},expression:"addPerson.level"}})],1),a("el-form-item",{attrs:{prop:"password",label:"密码",required:""}},[a("el-input",{attrs:{type:"password"},model:{value:e.addPerson.password,callback:function(t){e.$set(e.addPerson,"password",t)},expression:"addPerson.password"}})],1),a("el-form-item",{attrs:{prop:"department",label:"备注",required:""}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.addPerson.department,callback:function(t){e.$set(e.addPerson,"department",t)},expression:"addPerson.department"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addManager}},[e._v("提交")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取消 ")])],1)],1)],1)])],1)}),[],!1,null,null,null);t.default=o.exports}}]);